#!/bin/bash

BIN_DIR=/usr/bin
DATA_DIR=/var/lib/influxdb3
LOG_DIR=/var/log/influxdb3

# Distribution-specific logic
if [[ -f /etc/debian_version ]]; then
    # Ownership for RH-based platforms is set in build.py via the `rmp-attr` option.
    # We perform ownership change only for Debian-based systems.
    # Moving these lines out of this if statement would make `rmp -V` fail after installation.
    chown -R -L influxdb:influxdb $LOG_DIR
    chown -R -L influxdb:influxdb $DATA_DIR
    chmod 755 $LOG_DIR
    chmod 755 $DATA_DIR
fi
